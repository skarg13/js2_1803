<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Домашка по регуляркам, урок 4</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
<div class="container">
  <div class="src">
    <h2>Исходный текст</h2>
    <textarea id="src" cols="80" rows="20">
One:В 'Hi Mary.' Two:В 'Oh, hi.'
One:В 'How are you doing?'
Two:В 'I'm doing alright. How about you?'
One:В 'Not too bad.' ' 'The weather is great isn't it?'
Two:В 'Yes. It's absolutely beautiful today.'
One:В 'I wish it was like this more frequently.'
Two:В 'Me too.'
One:В 'So where are you going now?'
Two:В 'I'm going to meet a friend of mine at the department store.'
One:В 'Going to do a little shopping?'
Two:В 'Yeah, I have to buy some presents for my parents.'
One:В 'What's the occasion?'
Two:В 'It's their anniversary.'
One:В 'That's great. Well, you better get going. You don't want to be late.'
Two:В 'I'll see you next time.'
One:В 'Sure. Bye.'
    </textarea>
  </div>
  <div class="dst">
    <h2>Измененный текст</h2>
    <pre id="dst">

    </pre>
  </div>
</div>
<button onclick="replace()">Apply</button>
<input value="" id="tmpl" style="width:80%" autofocus/>


<script>
  function replace() {
    let src = String(document.querySelector("#src").textContent);
    let reg = document.querySelector("#tmpl").value;
    document.querySelector("#dst").textContent = src.replace(eval(reg), '"');
  }
  addEventListener("load", ()=>{
    document.getElementById("tmpl").value = /(\B'(\b|$))|(\b'\B)|(\B'\B)/img;
    setInterval(replace(), 500)
  } );
</script>
</body>
</html>
